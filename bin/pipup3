#!/usr/local/bin/bash

globalpython=$(echo $(pyenv version) | cut -d' ' -f1)
pyenv global $python3version 
IFS=$'\n'
echo  $'Getting outdated pip packages...'
res=$(pip list -o --format=legacy)

if [ -z "$res" ]; then
    echo $'All packages up to date.'
else
    echo ""
    echo "$res"
    echo ""
    echo $'Updating packages...\n'
    for prog in $res;do
		pip install --upgrade ${prog%\(*}
	done
fi

pip freeze > ~/dotfiles/installed-programs/pip3-programs.txt
sed -i '' -e 's/=.*//' pip3-programs.txt 

pyenv global $globalpython
echo $'\nDone'

