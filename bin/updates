#!/usr/local/bin/bash
VE=`echo $VIRTUAL_ENV`
if [ -z $VE ]; then
	echo -e "\e[1;34mUpdating: \e[91mpip2\e[0;97m"
	IFS=$'\n'
	echo  $'Getting outdated pip2 packages...'
	res=$(pip2 list -o --format=legacy)

	if [ -z "$res" ]; then
		echo $'All packages up to date.'
	else
		echo ""
		echo "$res"
		echo ""
		echo $'Updating packages...\n'
		for prog in $res;do
			pip2 install --upgrade ${prog%\(*}
		done
	fi
	echo -e "\n\e[1;34mUpdating: \e[91mpip3\e[0;97m"
	IFS=$'\n'
	echo  $'Getting outdated pip3 packages...'
	res=$(pip3 list -o --format=legacy)

	if [ -z "$res" ]; then
		echo $'All packages up to date.'
	else
		echo ""
		echo "$res"
		echo ""
		echo $'Updating packages...\n'
		for prog in $res;do
			pip3 install --upgrade ${prog%\(*}
		done
	fi
	echo -e "\n\e[1;34mUpdating: \e[91mHomebrew\e[0;97m"
	brew update
	brew upgrade
	brew cleanup
	brew prune
	brew doctor
	mkmasterinstall
	echo " "
	echo -e "\e[1;34mDone"
else
	echo 'Exit virtualenv first'
fi
