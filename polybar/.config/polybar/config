; -*- mode: conf-windows -*-
[colors]
black = #282828
white = #FDF4C1
green = #B8BB26
red = #FB4933
yellow = #FABD2F
blue = #83A598
purple = #D3869B
aqua = #8EC07C
orange = #FE8019
cyan = #3FD7E5
sienna = #DD6F48
light3 = #BDAE93
light4 = #A89984
dark2 = #504945

background = #1D2021
foreground = ${colors.white}
alert = ${colors.red}
comment = #7C6F64

[bar/simple]
monitor = ${env:MONITOR:eDP-1}
width = 100%
height = 47
fixed-center = true
line-size = 2

dpi = 210
background = ${colors.background}
foreground = ${colors.foreground}

module-margin=2
padding = 4

font-0 = Cantarell:size=8;3
font-1 = Symbols Nerd Font:style=Regular:size=8;3

modules-left = bspwm xwindow
modules-center = date
modules-right = backlight pulse packages bluez network battery hamburger

; tray-position=right
; tray-maxsize=32

wm-restack = bspwm

cursor-click = pointer
cursor-scroll = ns-resize
enable-ipc = true

[module/xwindow]
type = internal/xwindow
label-maxlen =  85
format = %{A1:window-switcher&:} <label>%{A}

[module/display]
type=custom/script
exec=[ "$(xrandr 2>/dev/null | grep ' connected ' | wc -l)" -gt "1" ] && echo " [__] " || echo ''
click-left=~/.config/polybar/blocks/mons-rofi

[module/bspwm]
type = internal/bspwm
format =%{A1:bspc desktop -l next:}<label-state> <label-mode>%{A}
wrapping-scroll = false
enable-click = false
enable-scroll = false
reverse-scroll = false

pin-workspaces = true
label-focused = ●
label-monocle= M

label-occupied = ●
label-occupied-foreground = ${colors.comment}

label-urgent = ●
label-urgent-foreground = ${colors.alert}

label-empty = ○
label-empty-foreground = ${colors.comment}

[module/network]
type = internal/network
interface = wlan0
format-connected = %{A1:iwd-rofi&:}<label-connected>%{A}
label-connected = 直

format-disconnected = %{A1:iwd-rofi&:}<label-disconnected>%{A}
label-disconnected = 睊
label-disconnected-foreground = ${colors.red}
interval = 2

[module/bluez]
click-left = ~/.config/polybar/blocks/bluez-rofi &
type = custom/script
exec = ~/.config/polybar/blocks/bluez
interval = 2

[module/date]
type = internal/date
label = %date%
format = %{A3:~/.config/polybar/blocks/cal-rofi &:}<label>%{A}
date = %a %H:%M
date-alt = %a %H:%M %b %d
interval = 2

[module/packages]
type = custom/script
exec = checkupdates | wc -l
label =  %output%
exec-if = checkupdates
interval = 600
format = %{A1:checkupdates | cut -d' ' -f1 | rofi -dmenu -p updates -theme menu &:}<label>%{A}

[module/cpu]
type = internal/cpu
format-foreground = ${colors.comment}
format = <label>
label = cpu %percentage:2%%

[module/mem]
type = internal/memory
format = <label>
label = mem %percentage_used:2%%
format-foreground = ${colors.comment}

[module/weather]
type = custom/script
exec = ~/.config/polybar/blocks/openweathermap.scm
click-middle = xdg-open https://darksky.net
interval = 120
label-font = 1

[module/battery]
type=custom/script
exec = ~/.config/polybar/blocks/battery-average
format = %{A1:batt.scm -rofi &:}<label>%{A}
interval=30

[module/pulse]
hidden=true
type=internal/pulseaudio
format-volume = <ramp-volume> <label-volume>
label-volume = %percentage%
label-muted = %percentage%
format-muted = 婢 <label-muted>
format-muted-foreground = ${colors.comment}

; Only applies if <bar-volume> is used
ramp-volume-0 = 奄
ramp-volume-1 = 奔
ramp-volume-2 = 墳

[module/backlight]
hidden=true
type = internal/backlight
card = intel_backlight
format = <ramp> <label>
label = %percentage%

ramp-0 = 
ramp-1 = 
ramp-2 = 

[module/hamburger]
type = custom/text
content = 襤
click-left = wm-exit -rofi

[settings]
screenchange-reload = true